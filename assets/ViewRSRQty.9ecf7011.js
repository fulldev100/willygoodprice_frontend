import{_ as w,a as L,B as S,D as N,A as C,n as y,S as R,r as f,o as l,c as r,b as t,w as b,p as v,g as d,h as n,G as D,t as i,d as T,v as A,f as m}from"./index.297aa858.js";import{u as I,h as P,v as x}from"./app-variable.7df075e7.js";import{n as B}from"./NavScrollTo.fa972258.js";import{l as E}from"./index.95329077.js";I();const g=L(),Q={data(){const s=y+"/";return{table:S({isLoading:!1,isReSearch:!1,rowClasses:a=>a.Stock_Number==1?["aaa","is-id-one"]:["bbb","other"],columns:[{label:"Status",field:"isBlocked",width:"5%",sortable:!0,display:function(a){return a.isBlocked?'<p style="color: red;font-weight: bold">'+(a.isDeleted?"Deleted":"")+'</p><p style="color: white;font-weight: bold">Blocked</p><p>Blocked</p>':'<p style="color: red;font-weight: bold">'+(a.isDeleted?"Deleted":"")+"</p>"}},{label:"Stock Number",field:"Stock_number",width:"5%",sortable:!0},{label:"Product Name",field:"Product Name",width:"5%",sortable:!0},{label:"New Quantity",field:"Stock_Level",width:"5%",sortable:!0},{label:"Old Quantity",field:"Inventory_Quantity",width:"5%",sortable:!0,isKey:!0}],rows:[],totalRecordCount:N(()=>this.totalCount),sortable:{order:"Stock_Number",sort:"asc"},messages:{pagingInfo:"Showing {0}-{1} of {2}",pageSizeChangeLabel:"Row count:",gotoPageLabel:"Go to page:",noDataAvailable:"No data"}}),port:"",data:S([]),ftpServerInput:"",usernameInput:"",passwordInput:"",readError:"Loading data from FTP...",isLoading:!1,totalCount:0,searchKey:"",tabName:"all",server_addr:s,is_whole_data:!1,new_filepath:"",hostURL:C,hostURLWithPort:y,socket:null,process_data:null}},components:{highlightjs:P,navScrollTo:B,vueTable:x},created(){this.doSearch(0,10,"Stock_Number","asc"),this.socket=E(this.hostURLWithPort,{path:"/inventory"})},mounted(){new R(document.body,{target:"#sidebar-bootstrap",offset:200}),this.socket!=null&&(setInterval(()=>{this.socket.emit("get_process","me")},2e3),this.socket.on("set_process",s=>{this.process_data=s}))},methods:{doSearch:function(s,o,h,a){this.isLoading||(this.table.isLoading=!0,g.GetTableData("getQtyInfo",s,o,h,a,this.tabName,this.searchKey).then(e=>{e.status&&(this.table.rows=e.data,this.totalCount=e.numberOfInventories[0].NumberOfInventories,this.table.sortable.order=h,this.table.sortable.sort=a,this.table.isLoading=!1)}).catch(e=>{console.log(e),this.readError=e.message}))},submitSearch:function(){this.doSearch(0,10,"Stock_Number","ASC")},stopProgress:function(){this.socket!=null&&this.socket.emit("stop_process","me")},submitQtyToSellerActive:function(){this.isLoading||(this.readError="Submit to SellerActive...",this.isLoading=!0,this.socket!=null&&this.socket.emit("get_process","me"),g.submitRSRQtyToSellerActive("all",this.searchKey).then(s=>{s.status&&(this.doSearch(0,10,"Stock_Number","asc"),this.isLoading=!1)}).catch(s=>{console.log(s),this.readError="Server error!"}))},onDownload:function(){g.GetDownloadBigcommerceInventoryFullForRSR().then(s=>{s.status&&alert("done")}).catch(s=>{console.log(s),this.readError=s.message})}}},U={class:"row justify-content-center"},V={class:"col-xl-12"},K={class:"row"},O={class:"col-xl-12"},F=t("ul",{class:"breadcrumb"},[t("li",{class:"breadcrumb-item"},[t("a",{href:"#"},"RSR")]),t("li",{class:"breadcrumb-item active"},"Quantity Manager")],-1),G=t("hr",{class:"mb-4"},null,-1),M={key:0},j={key:0},W={style:{color:"red"}},z={key:1},H=t("h5",null,"The End! Please try again.",-1),Y=[H],q={key:1,id:"vue3TableLite",class:"mb-5"},J={key:0,class:"tab-content pt-3"},X={class:"row"},Z={class:"col-md-3 col-sm-0"},$={class:"col-md-3 col-sm-12"},ee={class:"col-md-6 col-sm-12"},te={class:"row"},se={class:"col-9"},oe=t("div",{class:"col-3"},[t("button",{type:"submit",class:"btn btn-dark w-100 active"},"Search")],-1);function le(s,o,h,a,e,u){const _=f("card-body"),p=f("card"),k=f("vue-table");return l(),r("div",U,[t("div",V,[t("div",K,[t("div",O,[F,t("button",{type:"button",class:"btn btn-outline-theme",onClick:o[0]||(o[0]=b(c=>u.onDownload(),["prevent"]))}," Download CSV "),G,e.isLoading?(l(),v(p,{key:0},{default:d(()=>[m(_,null,{default:d(()=>[t("h2",null,i(e.readError),1),e.process_data?(l(),r("div",M,[e.process_data.process_value=="start"?(l(),r("div",j,[t("button",{type:"button",class:"btn btn-outline-theme ms-20px mb-10px",onClick:o[1]||(o[1]=b(c=>u.stopProgress(),["prevent"]))},"Stop"),t("h5",null,i(e.process_data.message_value),1),t("p",null,i(e.process_data.current_count)+" of "+i(e.process_data.total_count),1),t("p",W,i(e.process_data.fail_reason),1)])):(l(),r("div",z,Y))])):n("",!0)]),_:1})]),_:1})):n("",!0),e.isLoading?n("",!0):(l(),r("div",q,[e.isLoading?n("",!0):(l(),r("div",J,[t("div",{class:D(["tab-pane fade",{show:e.tabName=="all",active:e.tabName=="all"}]),id:"all_data"},[t("div",X,[t("div",Z,[t("h3",null,"All Data ( "+i(this.totalCount)+" )",1)]),t("div",$,[e.totalCount>0?(l(),r("button",{key:0,type:"button",class:"btn btn-outline-theme w-100 mb-10px",onClick:o[2]||(o[2]=b(c=>u.submitQtyToSellerActive(),["prevent"]))},"Submit QTY To SellerActive")):n("",!0)]),t("div",ee,[t("form",{class:"mb-10px",onSubmit:o[4]||(o[4]=b(c=>u.submitSearch(),["prevent"])),method:"POST"},[t("div",te,[t("div",se,[T(t("input",{type:"text","onUpdate:modelValue":o[3]||(o[3]=c=>e.searchKey=c),class:"form-control",placeholder:"Stock number or Manufacturer PartNumber or Description"},null,512),[[A,e.searchKey]])]),oe])],32)])])],2)])),!e.isLoading&&e.table&&e.table.rows.length>0?(l(),v(p,{key:1},{default:d(()=>[m(_,null,{default:d(()=>[m(k,{class:"vue-table",columns:e.table.columns,rows:e.table.rows,total:e.table.totalRecordCount,sortable:e.table.sortable,"is-loading":e.table.isLoading,messages:e.table.messages,onDoSearch:u.doSearch,onIsFinished:o[5]||(o[5]=c=>e.table.isLoading=!1)},null,8,["columns","rows","total","sortable","is-loading","messages","onDoSearch"])]),_:1})]),_:1})):n("",!0),e.isLoading?(l(),v(p,{key:2},{default:d(()=>[m(_,null,{default:d(()=>[t("h2",null,i(e.readError),1)]),_:1})]),_:1})):n("",!0)]))])])])])}const ce=w(Q,[["render",le]]);export{ce as default};
