import{_ as P,a as D,B as w,D as L,S as R,r as p,o as i,c as r,b as t,w as S,d as c,E as U,v as f,h as n,G as I,t as y,p as C,g as h,n as x,i as N,f as _}from"./index.c0512dbc.js";import{u as k,h as T,v as F}from"./app-variable.ec4159bd.js";import{n as V}from"./NavScrollTo.15062acc.js";k();const m=D(),A={data(){const a=x+"/";return{table:w({isLoading:!1,isReSearch:!1,rowClasses:l=>l.id==1?["aaa","is-id-one"]:["bbb","other"],columns:[{label:"ID",field:"_id",width:"5%",sortable:!1,isKey:!0},{label:"Title",field:"Title",width:"5%",sortable:!1},{label:"CWR Part Number",field:"CWR_PartNumber",width:"5%",sortable:!1},{label:"Manufacturer PartNumber",field:"Manufacturer_PartNumber",width:"5%",sortable:!1},{label:"UPC Code",field:"UPC_Code",width:"5%",sortable:!1},{label:"Quantity AvailabletoShipCombined",field:"Quantity_AvailabletoShipCombined",width:"5%",sortable:!1},{label:"M.A.P. Price",field:"MAP_Price",width:"5%",sortable:!1},{label:"M.R.P. Price",field:"MRP_Price",width:"5%",sortable:!1},{label:"Full Description",field:"Full_Description",width:"25%",sortable:!1},{label:"Category ID",field:"Category_ID",width:"5%",sortable:!1},{label:"Category Name",field:"Category_Name",width:"5%",sortable:!1},{label:"Manufacturer Name",field:"Manufacturer_Name",width:"5%",sortable:!1},{label:"List ofAccessoriesbySKU",field:"List_ofAccessoriesbySKU",width:"5%",sortable:!1},{label:"First ClassMail",field:"First_ClassMail",width:"5%",sortable:!1},{label:"Closeout",field:"Closeout",width:"5%",sortable:!1},{label:"Image 300X300",field:"Image_300_300Url",width:"5%",sortable:!1,display:function(l){return l.Image_300_300Url&&l.Image_300_300Url!=""?'<a href="'+l.Image_300_300Url+'" target="_blank"><img src="'+l.Image_300_300Url+'" style="width:150px"></a>':""}},{label:"Image 1000X1000",field:"Image_1000_1000Url",width:"5%",sortable:!1,display:function(l){return l.Image_1000_1000Url&&l.Image_1000_1000Url!=""?'<a href="'+l.Image_1000_1000Url+'" target="_blank"><img src="'+l.Image_1000_1000Url+'" style="width:150px"></a>':""}},{label:"Sale",field:"Sale",width:"5%",sortable:!1},{label:"Sale StartDate",field:"Sale_StartDate",width:"5%",sortable:!1},{label:"Sale EndDate",field:"Sale_EndDate",width:"3%",sortable:!1},{label:"Rebate",field:"Rebate",width:"3%",sortable:!1},{label:"Rebate Description",field:"Rebate_Description",width:"5%",sortable:!1},{label:"Rebate Description With Link",field:"Rebate_DescriptionWithLink",width:"5%",sortable:!1},{label:"Rebate StartDate",field:"Rebate_StartDate",width:"5%",sortable:!1},{label:"Rebate EndDate",field:"Rebate_EndDate",width:"5%",sortable:!1},{label:"Case Qty NJ",field:"Case_QtyNJ",width:"5%",sortable:!1},{label:"Case Qty FL",field:"Case_QtyFL",width:"5%",sortable:!1},{label:"Video",field:"Image_1000_1000Url",width:"5%",sortable:!1,display:function(l){if(l.Video_Urls&&l.Video_Urls!=""){const e=l.Video_Urls.split("|");let d="";return e.forEach(u=>{d+=`
								<video width="320" height="240" controls>
								<source src="${u}" type="video/mp4">
								Your browser does not support the video tag.
								</video>
								<p>Video URL: ${u}</p>
							`}),`<div>${d}</div>`}else return""}}],rows:[],totalRecordCount:L(()=>this.totalCount),sortable:{order:"id",sort:"asc"},messages:{pagingInfo:"Showing {0}-{1} of {2}",pageSizeChangeLabel:"Row count:",gotoPageLabel:"Go to page:",noDataAvailable:"No data"}}),port:"",data:w([]),ftpServerInput:"",usernameInput:"",passwordInput:"",readError:"Loading data from FTP...",isLoading:!1,totalCount:0,searchKey:"",tabName:"all",server_addr:a,is_whole_data:!1,new_filepath:""}},components:{highlightjs:T,navScrollTo:V,vueTable:F},created(){this.GetInventoryFull(),this.doSearch(0,10,"id","asc")},mounted(){new R(document.body,{target:"#sidebar-bootstrap",offset:200})},methods:{GetInventoryFull:function(){m.GetCWRData("GetCWRInventoryConfig").then(a=>{a.status&&a.ftp_config_data&&a.ftp_config_data.length>0&&(this.ftpServerInput=a.ftp_config_data[0].ftpServer,this.usernameInput=a.ftp_config_data[0].username,this.passwordInput=a.ftp_config_data[0].password,this.port=a.ftp_config_data[0].protocol,this.new_filepath=this.server_addr+a.new_filepath,this.doSearch(0,10,"id","asc"))}).catch(a=>{console.log(a),this.readError=a.message})},doSearch:function(a,s,b,l){this.isLoading||(this.table.isLoading=!0,m.GetCWRTableData("getInventoriesForTable",a,s,b,l,this.tabName,this.searchKey).then(e=>{e.status&&(this.table.rows=e.data,this.totalCount=e.numberOfInventories[0].NumberOfInventories,this.table.sortable.order=b,this.table.sortable.sort=l,this.table.isLoading=!1)}).catch(e=>{console.log(e),this.readError=e.message}))},submitForm:function(){if(this.readError="Loading data from FTP... It will take about 10 minutes.",!this.ftpServerInput||this.usernameInput==""||!this.passwordInput||this.passwordInput==""){this.readError="Please input the FTP info to read data.";return}this.isLoading=!0,m.getCWRInventoryInfo(this.ftpServerInput,this.usernameInput,this.passwordInput,this.port,this.is_whole_data).then(a=>{this.isLoading=!1,a.status&&this.doSearch(0,10,"_id","ASC")}).catch(a=>{this.isLoading=!1})},submitSearch:function(){this.doSearch(0,10,"id","ASC")}}},E={class:"row justify-content-center"},M={class:"col-xl-12"},W={class:"row"},G={class:"col-xl-12"},K=N('<ul class="breadcrumb"><li class="breadcrumb-item"><a href="#">CWR</a></li><li class="breadcrumb-item active">FTP</li></ul><hr class="mb-4">',2),B={id:"vue3TableLite",class:"mb-5"},Q={class:"row"},O={class:"col-xl-2 col-md-3 mb-2px"},j=t("option",{value:"ftp"},"ftp://",-1),q=t("option",{value:"sftp"},"sftp://",-1),z=t("option",{value:"ftps"},"ftps://",-1),J=[j,q,z],X={class:"col-xl-2 col-md-3 mb-2px"},H={key:0,class:"invalid-feedback"},Y={class:"col-xl-3 col-md-6 mb-2px"},Z={key:0,class:"invalid-feedback"},$={class:"col-xl-3 col-md-6 mb-2px"},ee={key:0,class:"invalid-feedback"},te={class:"col-xl-2 col-md-6 mb-2px"},se={key:0,type:"submit",class:"btn btn-info w-100 active",disabled:""},ae={key:1,type:"submit",class:"btn btn-info w-100 active"},le={key:0,class:"nav nav-tabs"},oe={class:"nav-item me-1"},ie={key:1,class:"tab-content pt-3"},re={class:"row"},ne={class:"col-md-6 col-sm-0"},de={class:"col-md-6 col-sm-12"},ce={class:"row"},be={class:"col-9"},ue=t("div",{class:"col-3"},[t("button",{type:"submit",class:"btn btn-dark w-100 active"},"Search")],-1);function fe(a,s,b,l,e,d){const u=p("vue-table"),v=p("card-body"),g=p("card");return i(),r("div",E,[t("div",M,[t("div",W,[t("div",G,[K,t("div",B,[t("form",{class:"was-validated mb-15px",onSubmit:s[4]||(s[4]=S(o=>d.submitForm(),["prevent"])),method:"POST",name:"register_form"},[t("div",Q,[t("div",O,[c(t("select",{class:"form-select","onUpdate:modelValue":s[0]||(s[0]=o=>e.port=o)},J,512),[[U,e.port]])]),t("div",X,[c(t("input",{type:"text","onUpdate:modelValue":s[1]||(s[1]=o=>e.ftpServerInput=o),class:"form-control is-invalid",placeholder:"FTP Server",required:""},null,512),[[f,e.ftpServerInput]]),e.ftpServerInput==""?(i(),r("div",H,"Please input the FTP server address.")):n("",!0)]),t("div",Y,[c(t("input",{type:"text","onUpdate:modelValue":s[2]||(s[2]=o=>e.usernameInput=o),class:"form-control is-invalid",placeholder:"Username",required:""},null,512),[[f,e.usernameInput]]),e.usernameInput==""?(i(),r("div",Z,"Please input the FTP username.")):n("",!0)]),t("div",$,[c(t("input",{type:"password","onUpdate:modelValue":s[3]||(s[3]=o=>e.passwordInput=o),class:"form-control is-invalid",placeholder:"Password",required:""},null,512),[[f,e.passwordInput]]),e.passwordInput==""?(i(),r("div",ee,"Please input the password.")):n("",!0)]),t("div",te,[e.isLoading?(i(),r("button",se,"reading...")):(i(),r("button",ae,"Read"))])])],32),e.isLoading?n("",!0):(i(),r("ul",le,[t("li",oe,[t("a",{href:"#all_data",class:I(["nav-link",{active:e.tabName=="all"}]),"data-bs-toggle":"tab",onClick:s[5]||(s[5]=o=>{o.preventDefault(),e.tabName="all",this.doSearch(0,10,"_id","asc")})}," New Data ",2)])])),e.isLoading?n("",!0):(i(),r("div",ie,[t("div",{class:I(["tab-pane fade",{show:e.tabName=="all",active:e.tabName=="all"}]),id:"all_data"},[t("div",re,[t("div",ne,[t("h3",null,"All Data ( "+y(this.totalCount)+" )",1)]),t("div",de,[t("form",{class:"mb-10px",onSubmit:s[7]||(s[7]=S(o=>d.submitSearch(),["prevent"])),method:"POST"},[t("div",ce,[t("div",be,[c(t("input",{type:"text","onUpdate:modelValue":s[6]||(s[6]=o=>e.searchKey=o),class:"form-control",placeholder:"Part number or Manufacturer PartNumber or Description"},null,512),[[f,e.searchKey]])]),ue])],32)])])],2)])),!e.isLoading&&e.table&&e.table.rows.length>0?(i(),C(g,{key:2},{default:h(()=>[_(v,null,{default:h(()=>[_(u,{class:"vue-table",columns:e.table.columns,rows:e.table.rows,total:e.table.totalRecordCount,sortable:e.table.sortable,"is-loading":e.table.isLoading,messages:e.table.messages,onDoSearch:d.doSearch,onIsFinished:s[8]||(s[8]=o=>e.table.isLoading=!1)},null,8,["columns","rows","total","sortable","is-loading","messages","onDoSearch"])]),_:1})]),_:1})):n("",!0),e.isLoading?(i(),C(g,{key:3},{default:h(()=>[_(v,null,{default:h(()=>[t("h2",null,y(e.readError),1)]),_:1})]),_:1})):n("",!0)])])])])])}const me=P(A,[["render",fe]]);export{me as default};
