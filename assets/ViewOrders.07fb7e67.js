import{_ as A,a as T,B as f,D as w,A as I,n as K,r as _,o as l,c as r,b as e,f as p,d as L,E as x,p as C,g,h as d,G as E,t as s,e as n,F as b,x as y,w as S,i as P}from"./index.c9c94c12.js";import{u as N,h as V,v as U}from"./app-variable.3f08ab6c.js";import{n as W}from"./NavScrollTo.ea3bcc36.js";import{l as F}from"./index.95329077.js";import{h as k,s as M}from"./moment.c90d5d84.js";N();const v=T(),q={data(){const i=f({groupingKey:"OrderStatus",isLoading:!1,isReSearch:!1,hasGroupToggle:!0,rowClasses:t=>t.id==1?["aaa","is-id-one"]:["bbb","other"],columns:[{label:"OrderID",field:"OrderID",width:"5%",sortable:!0,display:function(t){return t.to_sa?'<div><p><strong style="color: gray">'+t.OrderID+"</strong></p></div>":'<div><p><strong style="color: green">'+t.OrderID+"</strong></p></div>"}},{label:"SiteOrderID",field:"SiteOrderID",width:"5%",sortable:!0,isKey:!0},{label:"OrderStatus",field:"OrderStatus",width:"1%",sortable:!0,variant:"danger"},{label:"Name",field:"Name",width:"5%",sortable:!0,isKey:!0},{label:"Phone",field:"Phone",width:"5%",sortable:!0,isKey:!0},{label:"Address",field:"Address1",width:"10%",sortable:!0,headerClasses:["bg-gold","color-red"],columnClasses:["bg-gray"],display:function(t){return'<div><p><strong style="color: gray">Country:</strong> '+t.Country+', <strong style="color: gray">City:</strong> '+t.City+', <strong style="color: gray">PostalCode:</strong> '+t.PostalCode+'</p><p><strong style="color: gray">Address:</strong> '+t.Address1+" "+t.Address2+" "+t.Address3+'</p><p><strong style="color: gray">State or Region:</strong> '+t.StateOrRegion+"</p></div>"}},{label:"Site",field:"Site",width:"5%",sortable:!0,isKey:!0},{label:"Date Ordered",field:"DateOrdered",width:"5%",sortable:!0,isKey:!0},{label:"LatestShipDate",field:"LatestShipDate",width:"5%",sortable:!0,isKey:!0},{label:"LatestDeliveryDate",field:"LatestDeliveryDate",width:"5%",sortable:!0,isKey:!0}],rows:[],totalRecordCount:w(()=>this.totalCount),sortable:{order:"id",sort:"asc"},messages:{pagingInfo:"Showing {0}-{1} of {2}",pageSizeChangeLabel:"Row count:",gotoPageLabel:"Go to page:",noDataAvailable:"No data"}}),u=t=>{},h=t=>{this.selectedOrder=t,this.selectedOrderDetails=t.OrderDetails,this.selectedOrder.status&&(this.recommendedShippingRule=t.custom_selected_shipping_rule,this.awesomeShippingRequest=t.custom_recommend_object),this.$refs.buttonModal.click()};return{selectedOrder:"",selectedOrderDetails:[],table:i,data:f([]),readError:"",readErrorForCategory:"",isLoading:!1,isLoadingForCategory:!1,totalCount:0,searchKey:"",searchKeyForCategory:"",tabName:"create",tabForCategory:"category",hostURL:I,hostURLWithPort:K,socket:null,process_data:null,picked:new Date(Date.now()-864e5),selectedDay:k().add(-1,"d").format("YYYY-MM-DD"),supplier:"SWD",updateCheckedRows:u,rowClicked:h,recommendedShippingRule:"",awesomeShippingRequest:null}},components:{highlightjs:V,navScrollTo:W,vueTable:U,datepicker:M},created(){this.doSearch(0,50,"id","asc"),this.socket=F(this.hostURLWithPort,{path:"/inventory"})},mounted(){this.socket!=null&&(setInterval(()=>{this.socket.emit("get_process","me")},2e3),this.socket.on("set_process",c=>{this.process_data=c}))},methods:{doSearch:function(c,i,u,h){this.isLoading||(this.table.isLoading=!0,this.readError="Loading",v.getOrdersForTable(c,i,u,h,this.tabName,this.searchKey,this.selectedDay,this.supplier).then(t=>{t.status?(this.table.rows=t.data,this.totalCount=t.dataLength,this.table.sortable.order=u,this.table.sortable.sort=h,this.table.isLoading=!1,this.readError=""):this.readError="Loading error"}).catch(t=>{console.log(t),this.readError=t.message}))},updateOrder:function(){this.selectedOrder.OrderStatus=="Unshipped"?confirm("Are you sure you want to update the shipping rule?")?this.onUpdateOrder():console.log("Canceled"):alert("Already shipped")},updateOrderForSA:function(){this.selectedOrder.to_sa?confirm("Are you sure you want to submit the history to SellerActive?")?v.updateOrder(this.selectedOrder).then(c=>{c.status&&location.reload()}).catch(c=>{console.log(c),this.readError=c.message,alert(c.message)}):console.log("Canceled"):alert("Not found history")},onUpdateOrder:function(){this.recommendedShippingRule==""?alert("Omit ship to "+this.selectedOrder.StateOrRegion):(this.selectedOrder.awesomeShippingRequest=this.awesomeShippingRequest,this.selectedOrder.OrderDetails[0].ShippingServiceActual=this.awesomeShippingRequest.ServiceLevel,v.updateOrder(this.selectedOrder).then(c=>{c.status&&location.reload()}).catch(c=>{console.log(c),this.readError=c.message,alert(c.message)}))},stopProgress:function(){this.socket!=null&&this.socket.emit("stop_process","me")},updateDate:function(c){this.selectedDay=k(c).format("YYYY-MM-DD"),this.doSearch(0,50,"id","ASC")},updateSupplier:function(c){this.doSearch(0,50,"id","ASC")}}},G={class:"row justify-content-center"},Y={class:"col-xl-12"},B=P('<ul class="breadcrumb"><li class="breadcrumb-item"><a href="#">SellerActive</a></li><li class="breadcrumb-item active">Orders</li></ul><h1 class="page-header"> Order Manager<small>.</small></h1>',2),H={class:"d-flex align-items-center mb-3"},Q={class:"btn btn-outline-theme d-flex align-items-center"},X=e("label",{for:"datepicker",class:""},[e("i",{class:"fa fa-fw fa-calendar"})],-1),j=e("label",{for:"datepicker",class:""},[e("i",{class:"fa fa-fw fa-caret-down me-n1"})],-1),z={class:"d-flex align-items-center ms-5 mr-2"},Z=e("label",null,"Supplier: ",-1),J=e("option",{value:"SWD"},"SWD",-1),$=e("option",{value:"RSR"},"RSR",-1),ee=[J,$],te=e("hr",{class:"mb-4"},null,-1),se={class:"row"},oe={class:"col-xl-12 col-sm-12"},le={id:"vue3TableLite",class:"mb-5"},re={key:0},ne={key:0},de={style:{color:"red"}},ce={key:1},ie=e("h5",null,"The End! Please try again.",-1),ae=[ie],ue={key:1,class:"nav nav-tabs"},he={class:"nav-item me-1 dropdown"},_e={key:2,class:"tab-content pt-3"},pe={class:"row"},ge={class:"col-md-3 col-sm-0"},be=e("div",{class:"col-md-3 col-sm-12"},null,-1),ye={type:"button",class:"btn d-none",ref:"buttonModal","data-bs-toggle":"modal","data-bs-target":"#modalCoverExample"},Se={class:"modal modal-cover fade",id:"modalCoverExample"},ve={class:"modal-dialog",style:{maxWidth:"80%",minWidth:"300px"}},Oe={key:0,class:"modal-content"},me={class:"modal-header"},fe={class:"modal-title"},Ce=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"},null,-1),Ee={class:"modal-body"},ke=e("br",null,null,-1),De={style:{color:"gray"}},Re={style:{color:"gray"}},Ae={key:0},Te={key:1},we={key:0,class:"mb-3"},Ie=e("strong",null,"Title: ",-1),Ke={class:"row justify-content-center"},Le={class:"col-md-6 col-sm-12"},xe=e("br",null,null,-1),Pe=e("strong",{style:{color:"gray"}},"Vendor:",-1),Ne=e("br",null,null,-1),Ve=e("strong",{style:{color:"gray"}},"Quantity:",-1),Ue=e("br",null,null,-1),We=e("strong",{style:{color:"gray"}},"Cost:",-1),Fe=e("br",null,null,-1),Me=e("strong",{style:{color:"gray"}},"Total Price:",-1),qe=e("br",null,null,-1),Ge=e("strong",{style:{color:"gray"}},"Unit Price:",-1),Ye=e("br",null,null,-1),Be=e("strong",{style:{color:"gray"}},"Unit Tax:",-1),He=e("br",null,null,-1),Qe=e("br",null,null,-1),Xe=e("strong",{style:{color:"gray"}},"GiftWrap Price:",-1),je=e("br",null,null,-1),ze=e("strong",{style:{color:"gray"}},"GiftWrap Tax:",-1),Ze=e("br",null,null,-1),Je=e("strong",{style:{color:"gray"}},"Gift Message:",-1),$e=e("br",null,null,-1),et={class:"col-md-6 col-sm-12"},tt=e("strong",{style:{color:"gray"}},"Order Status:",-1),st=e("br",null,null,-1),ot=e("strong",{style:{color:"gray"}},"Shipping Service Ordered Method:",-1),lt=e("br",null,null,-1),rt=e("strong",{style:{color:"gray"}},"Actual Method:",-1),nt=e("br",null,null,-1),dt=e("strong",{style:{color:"gray"}},"Actual Charge:",-1),ct=e("br",null,null,-1),it=e("strong",{style:{color:"gray"}},"Actual Weight:",-1),at=e("br",null,null,-1),ut=e("br",null,null,-1),ht=e("strong",{style:{color:"gray"}},"Shipping Price:",-1),_t=e("br",null,null,-1),pt=e("strong",{style:{color:"gray"}},"Tax:",-1),gt=e("br",null,null,-1),bt=e("strong",{style:{color:"gray"}},"Discount:",-1),yt=e("br",null,null,-1),St=e("strong",{style:{color:"gray"}},"Carrier:",-1),vt=e("br",null,null,-1),Ot=e("br",null,null,-1),mt=e("strong",{style:{color:"gray"}},"Tracking:",-1),ft=e("br",null,null,-1),Ct=e("strong",{style:{color:"gray"}},"Tracking URL:",-1),Et=e("br",null,null,-1),kt={key:2},Dt=e("br",null,null,-1),Rt=e("br",null,null,-1),At=e("br",null,null,-1),Tt={key:3},wt={key:4,class:"d-flex"},It={class:"text-primary"},Kt={class:"text-primary"},Lt={class:"text-primary"},xt={key:5},Pt={class:"table-responsive"},Nt={class:"table table-dark table-striped table-bordered table-hover"},Vt=e("thead",{class:"table-light"},[e("tr",null,[e("th",{scope:"col"},"Service Level"),e("th",{scope:"col"},"Name"),e("th",{scope:"col"},"Rate"),e("th",{scope:"col"},"Cancelled"),e("th",{scope:"col"},"Backordered"),e("th",{scope:"col"},"AdditionalFees"),e("th",{scope:"col"},"CALIFORNIA"),e("th",{scope:"col"},"EAST"),e("th",{scope:"col"},"FLORIDA"),e("th",{scope:"col"},"GREAT_x0020_LAKES"),e("th",{scope:"col"},"MIDWEST"),e("th",{scope:"col"},"PACIFIC_x0020_NORTHWEST"),e("th",{scope:"col"},"SOUTHEAST"),e("th",{scope:"col"},"TEXAS")])],-1),Ut={key:0},Wt={scope:"row"},Ft={key:6},Mt={class:"table-responsive"},qt={class:"table table-dark table-striped table-bordered table-hover"},Gt=e("thead",{class:"table-light"},[e("tr",null,[e("th",{scope:"col"},"EKORD"),e("th",{scope:"col"},"EKDATE"),e("th",{scope:"col"},"EKTIME"),e("th",{scope:"col"},"EKVEND"),e("th",{scope:"col"},"EKPART"),e("th",{scope:"col"},"EKXQTY"),e("th",{scope:"col"},"EKEXTD"),e("th",{scope:"col"},"EKFRTD"),e("th",{scope:"col"},"EKSWHS"),e("th",{scope:"col"},"EKSVIA"),e("th",{scope:"col"},"EKTRCK"),e("th",{scope:"col"},"EKSTAT"),e("th",{scope:"col"},"EKPRIC"),e("th",{scope:"col"},"EKINV_x0023_"),e("th",{scope:"col"},"Shipping Carrier"),e("th",{scope:"col"},"Shipping Service")])],-1),Yt={key:0},Bt={key:7,class:"row mb-5"},Ht={class:"col-md-9"},Qt={key:0,class:"d-flex text-teal"},Xt={key:1,class:"text-danger"},jt={key:0,class:"col-md-3"},zt={key:8,class:"row mb-5"},Zt=e("div",{class:"col-md-9"},null,-1),Jt={class:"col-md-3"};function $t(c,i,u,h,t,a){const D=_("datepicker"),O=_("card-body"),m=_("card"),R=_("vue-table");return l(),r("div",G,[e("div",Y,[B,e("div",H,[e("div",Q,[X,p(D,{id:"datepicker",class:"bg-none text-reset shadow-none border-0 ps-2 w-100px p-0 outline-none","onUpdate:modelValue":[a.updateDate,i[0]||(i[0]=o=>t.picked=o)],modelValue:t.picked},null,8,["onUpdate:modelValue","modelValue"]),j]),e("div",z,[Z,L(e("select",{class:"form-select ms-1","onUpdate:modelValue":i[1]||(i[1]=o=>t.supplier=o),onChange:i[2]||(i[2]=o=>a.updateSupplier(o))},ee,544),[[x,t.supplier]])])]),te,e("div",se,[e("div",oe,[e("div",le,[t.isLoading?(l(),C(m,{key:0},{default:g(()=>[p(O,null,{default:g(()=>[e("h2",null,s(t.readError),1),t.process_data?(l(),r("div",re,[t.process_data.process_value=="start"?(l(),r("div",ne,[e("button",{type:"button",class:"btn btn-outline-theme ms-20px mb-10px",onClick:i[3]||(i[3]=S(o=>a.stopProgress(),["prevent"]))},"Stop"),e("h5",null,s(t.process_data.message_value),1),e("p",null,s(t.process_data.current_count)+" of "+s(t.process_data.total_count),1),e("p",de,s(t.process_data.fail_reason),1)])):(l(),r("div",ce,ae))])):d("",!0)]),_:1})]),_:1})):d("",!0),t.isLoading?d("",!0):(l(),r("ul",ue,[e("li",he,[e("a",{href:"#",class:E(["nav-link dropdown-toggle",{active:t.tabName=="create"||t.tabName=="update"||t.tabName=="delete"}]),"data-bs-toggle":"dropdown"}," Unshipped Orders ",2)])])),t.isLoading?d("",!0):(l(),r("div",_e,[e("div",{class:E(["tab-pane fade",{show:t.tabName=="create",active:t.tabName=="create"}]),id:"added_data"},[e("div",pe,[e("div",ge,[e("h3",null,"Count: "+s(this.totalCount),1)]),be])],2)])),!t.isLoading&&t.table&&t.table.rows.length>0?(l(),C(m,{key:3},{default:g(()=>[p(O,null,{default:g(()=>[p(R,{class:"vue-table","is-static-mode":!1,"start-collapsed":!1,"is-keep-collapsed":!0,"grouping-key":t.table.groupingKey,"has-group-toggle":t.table.hasGroupToggle,columns:t.table.columns,rows:t.table.rows,total:t.table.totalRecordCount,"page-size":50,sortable:t.table.sortable,"is-loading":t.table.isLoading,messages:t.table.messages,onDoSearch:a.doSearch,onIsFinished:i[4]||(i[4]=o=>t.table.isLoading=!1),onReturnCheckedRows:t.updateCheckedRows,onRowClicked:t.rowClicked},null,8,["grouping-key","has-group-toggle","columns","rows","total","sortable","is-loading","messages","onDoSearch","onReturnCheckedRows","onRowClicked"])]),_:1})]),_:1})):d("",!0)])])])]),e("button",ye,null,512),e("div",Se,[e("div",ve,[t.selectedOrder&&t.selectedOrderDetails?(l(),r("div",Oe,[e("div",me,[e("h3",fe,s(t.selectedOrder.Name),1),Ce]),e("div",Ee,[e("h6",null,[n(s(t.selectedOrder.Country)+", "+s(t.selectedOrder.City)+", "+s(t.selectedOrder.Address1)+" ",1),ke,e("strong",De,s(t.selectedOrder.Email)+", ",1),e("strong",Re,s(t.selectedOrder.Phone),1)]),t.selectedOrder.Address2?(l(),r("p",Ae," Address 2: "+s(t.selectedOrder.Address2),1)):d("",!0),t.selectedOrder.Address3?(l(),r("p",Te," Address 3: "+s(t.selectedOrder.Address3)+", ",1)):d("",!0),(l(!0),r(b,null,y(t.selectedOrderDetails,o=>(l(),r("div",null,[o?(l(),r("h5",we,[Ie,n(" "+s(o.Title),1)])):d("",!0),e("div",Ke,[e("div",Le,[e("p",null,[n(s(o.SKU)+" ",1),xe,Pe,n(" "+s(o.Vendor)+" ",1),Ne,Ve,n(" "+s(o.QuantityOrdered)+" ",1),Ue,We,n(" "+s(o.Cost)+"("+s(o.CurrencyISO)+")",1),Fe,Me,n(" "+s(o.TotalPrice)+"("+s(o.CurrencyISO)+")",1),qe,Ge,n(" "+s(o.UnitPrice)+"("+s(o.CurrencyISO)+")",1),Ye,Be,n(" "+s(o.UnitTax)+"("+s(o.CurrencyISO)+")",1),He,Qe,Xe,n(" "+s(o.GiftWrapPrice)+"("+s(o.CurrencyISO)+")",1),je,ze,n(" "+s(o.GiftWrapTax)+"("+s(o.CurrencyISO)+")",1),Ze,Je,n(" "+s(o.GiftMessage),1),$e])]),e("div",et,[e("p",null,[tt,n(" "+s(o.OrderStatus)+" ",1),st,ot,n(" "+s(o.ShippingServiceOrdered)+" ",1),lt,rt,n(" "+s(o.ShippingServiceActual)+" ",1),nt,dt,n(" "+s(o.ShippingActualCharge)+" ",1),ct,it,n(" "+s(o.ShippingActualWeight)+" ",1),at,ut,ht,n(" "+s(o.ShippingPrice)+"("+s(o.CurrencyISO)+")",1),_t,pt,n(" "+s(o.ShippingTax)+"("+s(o.CurrencyISO)+")",1),gt,bt,n(" "+s(o.ShippingDiscount)+"("+s(o.CurrencyISO)+")",1),yt,St,n(" "+s(o.ShippingCarrier)+" ",1),vt,Ot,mt,n(" "+s(o.ShippingTracking)+" ",1),ft,Ct,n(" "+s(o.ShippingTrackingURL)+" ",1),Et])])])]))),256)),t.selectedOrder?(l(),r("p",kt,[n(" Ordered: "+s(t.selectedOrder.DateOrdered)+" ",1),Dt,n(" Latest Delivery Date: "+s(t.selectedOrder.LatestDeliveryDate)+" ",1),Rt,n(" Latest Ship Date: "+s(t.selectedOrder.LatestShipDate)+" ",1),At])):d("",!0),t.recommendedShippingRule?(l(),r("div",Tt,[e("h5",null,[e("strong",null,"Shipping Rule: "+s(t.recommendedShippingRule),1)])])):d("",!0),t.selectedOrder.request_shippingoption?(l(),r("div",wt,[e("h6",It,"Request VCPN: "+s(t.selectedOrder.request_shippingoption.VCPN)+", \xA0\xA0\xA0\xA0\xA0",1),e("h6",Kt,"ZIP: "+s(t.selectedOrder.request_shippingoption.ZIP)+", \xA0\xA0\xA0\xA0\xA0",1),e("h6",Lt,"Total Quantity: "+s(t.selectedOrder.request_shippingoption.Quantity),1)])):d("",!0),t.selectedOrder.to_sa?d("",!0):(l(),r("div",xt,[e("div",Pt,[e("table",Nt,[Vt,t.selectedOrder.shippingoptions&&t.selectedOrder.shippingoptions.length>0?(l(),r("tbody",Ut,[(l(!0),r(b,null,y(t.selectedOrder.shippingoptions,o=>(l(),r("tr",null,[e("th",null,s(o.ServiceLevel),1),e("td",null,s(o.Name),1),e("td",Wt,s(o.Rate),1),e("td",null,s(o.Cancelled),1),e("td",null,s(o.Backordered),1),e("td",null,s(o.AdditionalFees),1),e("td",null,s(o.CALIFORNIA),1),e("td",null,s(o.EAST),1),e("td",null,s(o.FLORIDA),1),e("td",null,s(o.GREAT_x0020_LAKES),1),e("td",null,s(o.MIDWEST),1),e("td",null,s(o.PACIFIC_x0020_NORTHWEST),1),e("td",null,s(o.SOUTHEAST),1),e("td",null,s(o.TEXAS),1)]))),256))])):d("",!0)])])])),t.selectedOrder.to_sa?(l(),r("div",Ft,[e("div",Mt,[e("table",qt,[Gt,t.selectedOrder.track_history&&t.selectedOrder.track_history.length>0?(l(),r("tbody",Yt,[(l(!0),r(b,null,y(t.selectedOrder.track_history,o=>(l(),r("tr",null,[e("th",null,s(o.EKORD_x0023_DESC),1),e("td",null,s(o.EKDATE_DESC),1),e("td",null,s(o.EKTIME_DESC),1),e("td",null,s(o.EKVEND),1),e("td",null,s(o.EKPART),1),e("td",null,s(o.EKXQTY),1),e("td",null,s(o.EKEXTD),1),e("td",null,s(o.EKFRTD),1),e("td",null,s(o.EKSWHS),1),e("td",null,s(o.EKSVIA)+" ("+s(o.EKSVIA_DESC)+")",1),e("td",null,s(o.EKTRCK),1),e("td",null,s(o.EKSTAT),1),e("td",null,s(o.EKPRIC),1),e("td",null,s(o.EKINV_x0023_),1),e("td",null,s(o.SHIPPING_CARRIER),1),e("td",null,s(o.SHIPPING_SERVICE),1)]))),256))])):d("",!0)])])])):d("",!0),t.selectedOrder.to_sa?d("",!0):(l(),r("div",Bt,[e("div",Ht,[t.selectedOrder.status!="canceled"?(l(),r("div",Qt," Recommended Shipping Name: "+s(t.awesomeShippingRequest.Name)+" \xA0\xA0\xA0\xA0\xA0 ServiceLevel: "+s(t.awesomeShippingRequest.ServiceLevel)+" \xA0\xA0\xA0\xA0\xA0 "+s(t.awesomeShippingRequest.warehourse_location)+": "+s(t.awesomeShippingRequest.warehourse_value),1)):d("",!0),t.selectedOrder.status=="canceled"?(l(),r("div",Xt,s(t.selectedOrder.message),1)):d("",!0)]),t.selectedOrder.status!="canceled"?(l(),r("div",jt,[e("button",{type:"button",class:"btn btn-outline-theme btn-lg btn-block w-100",onClick:i[5]||(i[5]=S(o=>a.updateOrder(),["prevent"]))},"Submit to SWD")])):d("",!0)])),t.selectedOrder.to_sa?(l(),r("div",zt,[Zt,e("div",Jt,[e("button",{type:"button",class:"btn btn-outline-theme btn-lg btn-block w-100",onClick:i[6]||(i[6]=S(o=>a.updateOrderForSA(),["prevent"]))},"Submit to SellerActive")])])):d("",!0)])])):d("",!0)])])])}const rs=A(q,[["render",$t]]);export{rs as default};
