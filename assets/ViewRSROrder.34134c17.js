import{_ as w,a as R,B as O,D as A,A as x,r as _,o as n,c as i,b as e,f as p,d as L,E as T,p as f,g,h as d,G as v,t as s,e as r,F as N,x as P,w as y,i as I}from"./index.c9c94c12.js";import{h as U,v as E}from"./app-variable.3f08ab6c.js";import{n as M}from"./NavScrollTo.ea3bcc36.js";import{h as k,s as V}from"./moment.c90d5d84.js";const b=R(),F={data(){const l=O({groupingKey:"OrderStatus",isLoading:!1,isReSearch:!1,hasGroupToggle:!0,rowClasses:t=>t.id==1?["aaa","is-id-one"]:["bbb","other"],columns:[{label:"OrderID",field:"OrderID",width:"5%",sortable:!0,display:function(t){return t.to_sa?'<div><p><strong style="color: gray">'+t.OrderID+"</strong></p></div>":'<div><p><strong style="color: green">'+t.OrderID+"</strong></p></div>"}},{label:"SiteOrderID",field:"SiteOrderID",width:"5%",sortable:!0,isKey:!0},{label:"OrderStatus",field:"OrderStatus",width:"1%",sortable:!0,variant:"danger"},{label:"Name",field:"Name",width:"5%",sortable:!0,isKey:!0},{label:"Phone",field:"Phone",width:"5%",sortable:!0,isKey:!0},{label:"Address",field:"Address1",width:"10%",sortable:!0,headerClasses:["bg-gold","color-red"],columnClasses:["bg-gray"],display:function(t){return'<div><p><strong style="color: gray">Country:</strong> '+t.Country+', <strong style="color: gray">City:</strong> '+t.City+', <strong style="color: gray">PostalCode:</strong> '+t.PostalCode+'</p><p><strong style="color: gray">Address:</strong> '+t.Address1+" "+t.Address2+" "+t.Address3+'</p><p><strong style="color: gray">State or Region:</strong> '+t.StateOrRegion+"</p></div>"}},{label:"Site",field:"Site",width:"5%",sortable:!0,isKey:!0},{label:"Date Ordered",field:"DateOrdered",width:"5%",sortable:!0,isKey:!0},{label:"LatestShipDate",field:"LatestShipDate",width:"5%",sortable:!0,isKey:!0},{label:"LatestDeliveryDate",field:"LatestDeliveryDate",width:"5%",sortable:!0,isKey:!0}],rows:[],totalRecordCount:A(()=>this.totalCount),sortable:{order:"id",sort:"asc"},messages:{pagingInfo:"Showing {0}-{1} of {2}",pageSizeChangeLabel:"Row count:",gotoPageLabel:"Go to page:",noDataAvailable:"No data"}}),a=t=>{},u=t=>{this.selectedOrder=t,this.selectedOrderDetails=t.OrderDetails,this.selectedOrder.status&&(this.recommendedShippingRule=t.custom_selected_shipping_rule),this.$refs.buttonModal.click()};return{selectedOrder:"",selectedOrderDetails:[],table:l,data:O([]),readError:"",readErrorForCategory:"",isLoading:!1,isLoadingForCategory:!1,totalCount:0,searchKey:"",searchKeyForCategory:"",tabName:"create",tabForCategory:"category",hostURL:x,process_data:null,picked:new Date(Date.now()-864e5),selectedDay:k().add(-1,"d").format("YYYY-MM-DD"),supplier:"RSR",updateCheckedRows:a,rowClicked:u,recommendedShippingRule:""}},components:{highlightjs:U,navScrollTo:M,vueTable:E,datepicker:V},created(){this.doSearch(0,50,"id","asc")},methods:{doSearch:function(c,l,a,u){this.isLoading||(this.table.isLoading=!0,this.readError="Loading",b.getRSROrdersForTable(c,l,a,u,this.tabName,this.searchKey,this.selectedDay,this.supplier).then(t=>{t.status?(this.table.rows=t.data,this.totalCount=t.dataLength,this.table.sortable.order=a,this.table.sortable.sort=u,this.table.isLoading=!1,this.readError=""):this.readError="Loading error"}).catch(t=>{console.log(t),this.readError=t.message}))},updateOrder:function(){this.selectedOrder.OrderStatus=="Unshipped"?confirm("Are you sure you want to submit the shipping rule?")?this.onUpdateOrder():console.log("Canceled"):alert("Already shipped")},updateOrderForSA:function(){if(this.selectedOrder.to_sa){let c="Are you sure you want to submit the history to FTP?";this.selectedOrder.track_history.shipped&&(c="Are you sure you want to submit the history to SellerActive?"),confirm(c)?b.submitRSROrder(this.selectedOrder).then(l=>{l.status&&location.reload()}).catch(l=>{console.log(l),this.readError=l.message,alert(l.message)}):console.log("Canceled")}else alert("Not found history")},onUpdateOrder:function(){this.recommendedShippingRule==""?alert("Omit ship to "+this.selectedOrder.StateOrRegion):b.submitRSROrder(this.selectedOrder).then(c=>{c.status&&location.reload()}).catch(c=>{console.log(c),this.readError=c.message,alert(c.message)})},updateDate:function(c){this.selectedDay=k(c).format("YYYY-MM-DD"),this.doSearch(0,50,"id","ASC")},updateSupplier:function(c){this.doSearch(0,50,"id","ASC")}}},K={class:"row justify-content-center"},G={class:"col-xl-12"},W=I('<ul class="breadcrumb"><li class="breadcrumb-item"><a href="#">SellerActive</a></li><li class="breadcrumb-item active">Orders</li></ul><h1 class="page-header"> Order Manager<small>.</small></h1>',2),Y={class:"d-flex align-items-center mb-3"},B={class:"btn btn-outline-theme d-flex align-items-center"},Q=e("label",{for:"datepicker",class:""},[e("i",{class:"fa fa-fw fa-calendar"})],-1),q=e("label",{for:"datepicker",class:""},[e("i",{class:"fa fa-fw fa-caret-down me-n1"})],-1),j={class:"d-flex align-items-center ms-5 mr-2"},z=e("label",null,"Supplier: ",-1),H=e("option",{value:"RSR"},"RSR",-1),Z=[H],J=e("hr",{class:"mb-4"},null,-1),X={class:"row"},$={class:"col-xl-12 col-sm-12"},ee={id:"vue3TableLite",class:"mb-5"},te={key:0},se={key:0},oe={style:{color:"red"}},re={key:1},le=e("h5",null,"The End! Please try again.",-1),ne=[le],ie={key:1,class:"nav nav-tabs"},de={class:"nav-item me-1 dropdown"},ce={key:2,class:"tab-content pt-3"},ae={class:"row"},ue={class:"col-md-3 col-sm-0"},he=e("div",{class:"col-md-3 col-sm-12"},null,-1),_e={type:"button",class:"btn d-none",ref:"buttonModal","data-bs-toggle":"modal","data-bs-target":"#modalCoverExample"},pe={class:"modal modal-cover fade",id:"modalCoverExample"},ge={class:"modal-dialog",style:{maxWidth:"80%",minWidth:"300px"}},ye={key:0,class:"modal-content"},be={class:"modal-header"},me={class:"modal-title"},Se=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"},null,-1),Oe={class:"modal-body"},fe=e("br",null,null,-1),ve={style:{color:"gray"}},ke={style:{color:"gray"}},Ce={key:0},De={key:1},we={key:0,class:"mb-3"},Re=e("strong",null,"Title: ",-1),Ae={class:"row justify-content-center"},xe={class:"col-md-6 col-sm-12"},Le=e("br",null,null,-1),Te=e("strong",{style:{color:"gray"}},"Vendor:",-1),Ne=e("br",null,null,-1),Pe=e("strong",{style:{color:"gray"}},"Quantity:",-1),Ie=e("br",null,null,-1),Ue=e("strong",{style:{color:"gray"}},"Cost:",-1),Ee=e("br",null,null,-1),Me=e("strong",{style:{color:"gray"}},"Total Price:",-1),Ve=e("br",null,null,-1),Fe=e("strong",{style:{color:"gray"}},"Unit Price:",-1),Ke=e("br",null,null,-1),Ge=e("strong",{style:{color:"gray"}},"Unit Tax:",-1),We=e("br",null,null,-1),Ye=e("br",null,null,-1),Be=e("strong",{style:{color:"gray"}},"GiftWrap Price:",-1),Qe=e("br",null,null,-1),qe=e("strong",{style:{color:"gray"}},"GiftWrap Tax:",-1),je=e("br",null,null,-1),ze=e("strong",{style:{color:"gray"}},"Gift Message:",-1),He=e("br",null,null,-1),Ze={class:"col-md-6 col-sm-12"},Je=e("strong",{style:{color:"gray"}},"Order Status:",-1),Xe=e("br",null,null,-1),$e=e("strong",{style:{color:"gray"}},"Shipping Service Ordered Method:",-1),et=e("br",null,null,-1),tt=e("strong",{style:{color:"gray"}},"Actual Method:",-1),st=e("br",null,null,-1),ot=e("strong",{style:{color:"gray"}},"Actual Charge:",-1),rt=e("br",null,null,-1),lt=e("strong",{style:{color:"gray"}},"Actual Weight:",-1),nt=e("br",null,null,-1),it=e("br",null,null,-1),dt=e("strong",{style:{color:"gray"}},"Shipping Price:",-1),ct=e("br",null,null,-1),at=e("strong",{style:{color:"gray"}},"Tax:",-1),ut=e("br",null,null,-1),ht=e("strong",{style:{color:"gray"}},"Discount:",-1),_t=e("br",null,null,-1),pt=e("strong",{style:{color:"gray"}},"Carrier:",-1),gt=e("br",null,null,-1),yt=e("br",null,null,-1),bt=e("strong",{style:{color:"gray"}},"Tracking:",-1),mt=e("br",null,null,-1),St=e("strong",{style:{color:"gray"}},"Tracking URL:",-1),Ot=e("br",null,null,-1),ft={key:2},vt=e("br",null,null,-1),kt=e("br",null,null,-1),Ct=e("br",null,null,-1),Dt={key:3},wt={key:4,class:"d-flex"},Rt={class:"text-primary"},At={class:"text-primary"},xt={class:"text-primary"},Lt={key:5,class:"row mb-5"},Tt={class:"col-md-9"},Nt={key:0,class:"d-flex text-teal"},Pt=e("br",null,null,-1),It={key:1,class:"text-danger"},Ut={key:0,class:"col-md-3"},Et={key:6,class:"row mb-5"},Mt={key:0,class:"col-md-9"},Vt=e("br",null,null,-1),Ft=e("br",null,null,-1),Kt=e("br",null,null,-1),Gt=e("br",null,null,-1),Wt={key:1,class:"col-md-9"},Yt={class:"col-md-3"};function Bt(c,l,a,u,t,h){const C=_("datepicker"),m=_("card-body"),S=_("card"),D=_("vue-table");return n(),i("div",K,[e("div",G,[W,e("div",Y,[e("div",B,[Q,p(C,{id:"datepicker",class:"bg-none text-reset shadow-none border-0 ps-2 w-100px p-0 outline-none","onUpdate:modelValue":[h.updateDate,l[0]||(l[0]=o=>t.picked=o)],modelValue:t.picked},null,8,["onUpdate:modelValue","modelValue"]),q]),e("div",j,[z,L(e("select",{class:"form-select ms-1","onUpdate:modelValue":l[1]||(l[1]=o=>t.supplier=o),onChange:l[2]||(l[2]=o=>h.updateSupplier(o))},Z,544),[[T,t.supplier]])])]),J,e("div",X,[e("div",$,[e("div",ee,[t.isLoading?(n(),f(S,{key:0},{default:g(()=>[p(m,null,{default:g(()=>[e("h2",null,s(t.readError),1),t.process_data?(n(),i("div",te,[t.process_data.process_value=="start"?(n(),i("div",se,[e("button",{type:"button",class:"btn btn-outline-theme ms-20px mb-10px",onClick:l[3]||(l[3]=y(o=>c.stopProgress(),["prevent"]))},"Stop"),e("h5",null,s(t.process_data.message_value),1),e("p",null,s(t.process_data.current_count)+" of "+s(t.process_data.total_count),1),e("p",oe,s(t.process_data.fail_reason),1)])):(n(),i("div",re,ne))])):d("",!0)]),_:1})]),_:1})):d("",!0),t.isLoading?d("",!0):(n(),i("ul",ie,[e("li",de,[e("a",{href:"#",class:v(["nav-link dropdown-toggle",{active:t.tabName=="create"||t.tabName=="update"||t.tabName=="delete"}]),"data-bs-toggle":"dropdown"}," Unshipped Orders ",2)])])),t.isLoading?d("",!0):(n(),i("div",ce,[e("div",{class:v(["tab-pane fade",{show:t.tabName=="create",active:t.tabName=="create"}]),id:"added_data"},[e("div",ae,[e("div",ue,[e("h3",null,"Count: "+s(this.totalCount),1)]),he])],2)])),!t.isLoading&&t.table&&t.table.rows.length>0?(n(),f(S,{key:3},{default:g(()=>[p(m,null,{default:g(()=>[p(D,{class:"vue-table","is-static-mode":!1,"start-collapsed":!1,"is-keep-collapsed":!0,"grouping-key":t.table.groupingKey,"has-group-toggle":t.table.hasGroupToggle,columns:t.table.columns,rows:t.table.rows,total:t.table.totalRecordCount,"page-size":50,sortable:t.table.sortable,"is-loading":t.table.isLoading,messages:t.table.messages,onDoSearch:h.doSearch,onIsFinished:l[4]||(l[4]=o=>t.table.isLoading=!1),onReturnCheckedRows:t.updateCheckedRows,onRowClicked:t.rowClicked},null,8,["grouping-key","has-group-toggle","columns","rows","total","sortable","is-loading","messages","onDoSearch","onReturnCheckedRows","onRowClicked"])]),_:1})]),_:1})):d("",!0)])])])]),e("button",_e,null,512),e("div",pe,[e("div",ge,[t.selectedOrder&&t.selectedOrderDetails?(n(),i("div",ye,[e("div",be,[e("h3",me,s(t.selectedOrder.Name),1),Se]),e("div",Oe,[e("h6",null,[r(s(t.selectedOrder.Country)+", "+s(t.selectedOrder.City)+", "+s(t.selectedOrder.Address1)+" ",1),fe,e("strong",ve,s(t.selectedOrder.Email)+", ",1),e("strong",ke,s(t.selectedOrder.Phone),1)]),t.selectedOrder.Address2?(n(),i("p",Ce," Address 2: "+s(t.selectedOrder.Address2),1)):d("",!0),t.selectedOrder.Address3?(n(),i("p",De," Address 3: "+s(t.selectedOrder.Address3)+", ",1)):d("",!0),(n(!0),i(N,null,P(t.selectedOrderDetails,o=>(n(),i("div",null,[o?(n(),i("h5",we,[Re,r(" "+s(o.Title),1)])):d("",!0),e("div",Ae,[e("div",xe,[e("p",null,[r(s(o.SKU)+" ",1),Le,Te,r(" "+s(o.Vendor)+" ",1),Ne,Pe,r(" "+s(o.QuantityOrdered)+" ",1),Ie,Ue,r(" "+s(o.Cost)+"("+s(o.CurrencyISO)+")",1),Ee,Me,r(" "+s(o.TotalPrice)+"("+s(o.CurrencyISO)+")",1),Ve,Fe,r(" "+s(o.UnitPrice)+"("+s(o.CurrencyISO)+")",1),Ke,Ge,r(" "+s(o.UnitTax)+"("+s(o.CurrencyISO)+")",1),We,Ye,Be,r(" "+s(o.GiftWrapPrice)+"("+s(o.CurrencyISO)+")",1),Qe,qe,r(" "+s(o.GiftWrapTax)+"("+s(o.CurrencyISO)+")",1),je,ze,r(" "+s(o.GiftMessage),1),He])]),e("div",Ze,[e("p",null,[Je,r(" "+s(o.OrderStatus)+" ",1),Xe,$e,r(" "+s(o.ShippingServiceOrdered)+" ",1),et,tt,r(" "+s(o.ShippingServiceActual)+" ",1),st,ot,r(" "+s(o.ShippingActualCharge)+" ",1),rt,lt,r(" "+s(o.ShippingActualWeight)+" ",1),nt,it,dt,r(" "+s(o.ShippingPrice)+"("+s(o.CurrencyISO)+")",1),ct,at,r(" "+s(o.ShippingTax)+"("+s(o.CurrencyISO)+")",1),ut,ht,r(" "+s(o.ShippingDiscount)+"("+s(o.CurrencyISO)+")",1),_t,pt,r(" "+s(o.ShippingCarrier)+" ",1),gt,yt,bt,r(" "+s(o.ShippingTracking)+" ",1),mt,St,r(" "+s(o.ShippingTrackingURL)+" ",1),Ot])])])]))),256)),t.selectedOrder?(n(),i("p",ft,[r(" Ordered: "+s(t.selectedOrder.DateOrdered)+" ",1),vt,r(" Latest Delivery Date: "+s(t.selectedOrder.LatestDeliveryDate)+" ",1),kt,r(" Latest Ship Date: "+s(t.selectedOrder.LatestShipDate)+" ",1),Ct])):d("",!0),t.recommendedShippingRule?(n(),i("div",Dt,[e("h5",null,[e("strong",null,"Shipping Rule: "+s(t.recommendedShippingRule),1)])])):d("",!0),t.selectedOrder.request_shippingoption?(n(),i("div",wt,[e("h6",Rt,"Request VCPN: "+s(t.selectedOrder.request_shippingoption.VCPN)+", \xA0\xA0\xA0\xA0\xA0",1),e("h6",At,"ZIP: "+s(t.selectedOrder.request_shippingoption.ZIP)+", \xA0\xA0\xA0\xA0\xA0",1),e("h6",xt,"Total Quantity: "+s(t.selectedOrder.request_shippingoption.Quantity),1)])):d("",!0),t.selectedOrder.to_sa?d("",!0):(n(),i("div",Lt,[e("div",Tt,[t.selectedOrder.status?(n(),i("div",Nt,[r(" Shipping Carrier: "+s(t.selectedOrder.OrderDetails[0].ShippingCarrier)+" ",1),Pt,r(" Shipping Method: "+s(t.selectedOrder.recommended_shipping_method),1)])):d("",!0),t.selectedOrder.status?d("",!0):(n(),i("div",It,s(t.selectedOrder.message),1))]),t.selectedOrder.status!="canceled"?(n(),i("div",Ut,[e("button",{type:"button",class:"btn btn-outline-theme btn-lg btn-block w-100",onClick:l[5]||(l[5]=y(o=>h.updateOrder(),["prevent"]))},"Submit to RSR FTP")])):d("",!0)])),t.selectedOrder.to_sa?(n(),i("div",Et,[t.selectedOrder.track_history.shipped?(n(),i("div",Mt,[r(" Shipping Name: "+s(t.selectedOrder.track_history.ShipToName)+", \xA0\xA0\xA0\xA0\xA0 DateShipped: "+s(t.selectedOrder.track_history.DateShipped),1),Vt,r(" Track Number: "+s(t.selectedOrder.track_history.TrackNumber)+", \xA0\xA0\xA0\xA0\xA0 Invoice Number: "+s(t.selectedOrder.track_history.InvoiceNumber),1),Ft,r(" Shipping Cost: "+s(t.selectedOrder.track_history.ShippingCost)+", \xA0\xA0\xA0\xA0\xA0 Handling Fee: "+s(t.selectedOrder.track_history.HandlingFee),1),Kt,r(" Shipping Carrier: "+s(t.selectedOrder.track_history.ShippingCarrier)+", \xA0\xA0\xA0\xA0\xA0 Shipping Method: "+s(t.selectedOrder.track_history.ShippingMethod),1),Gt])):d("",!0),t.selectedOrder.track_history.shipped?d("",!0):(n(),i("div",Wt," Order Quantity: "+s(t.selectedOrder.track_history.Qty),1)),e("div",Yt,[e("button",{type:"button",class:"btn btn-outline-theme btn-lg btn-block w-100",onClick:l[6]||(l[6]=y(o=>h.updateOrderForSA(),["prevent"]))},s(t.selectedOrder.track_history.shipped?"Confirm Shipped":"Submit to Seller Active"),1)])])):d("",!0)])])):d("",!0)])])])}const Ht=w(F,[["render",Bt]]);export{Ht as default};
